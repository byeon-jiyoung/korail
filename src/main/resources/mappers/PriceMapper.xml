<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yi.mapper.PriceMapper">
	
	<resultMap type="Price" id="resultPrice">
		<id column="p_no" property="pNo"/>
		<result column="price" property="price"/>
	</resultMap>
	
	<resultMap type="Price" id="resultPrice2" extends="resultPrice">
		<association property="nodeidS" resultMap="com.yi.mapper.CityTrainMapper.resultCityTrain2" />
		<association property="nodeidA" resultMap="com.yi.mapper.CityTrainMapper.resultCityTrain2" />
	</resultMap>
	
	<select id="listPrice" resultMap="resultPrice2">
		<!-- select startStation.p_no , startStation.price, startStation.nodename, startStation.nodeid_s, arriveStation.nodename, arriveStation.nodeid_a -->
		select *
		from	
			(select p.p_no, p.price, p.nodeid_s, ct.nodename, ct.citycode from price p join city_train ct on p.nodeid_s = ct.nodeid) startStation
		join
			(select p.p_no, p.price, p.nodeid_a, ct.nodename, ct.citycode from price p join city_train ct on p.nodeid_a = ct.nodeid) arriveStation
		on 
			startStation.p_no = arriveStation.p_no;
	</select>
</mapper>