<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yi.mapper.PriceMapper">
	
	<resultMap type="Price" id="resultPrice">
		<!-- <id column="p_no" property="pNo"/>
		<result column="price" property="price"/> -->
		<association property="nodeidS" resultMap="com.yi.mapper.CityTrainMapper.resultCityTrain2" columnPrefix="start_"/>
	</resultMap>
	
	<resultMap type="Price" id="resultPrice2" extends="resultPrice">
		<id column="p_no" property="pNo"/>
		<result column="price" property="price"/>
		<association property="nodeidA" resultMap="com.yi.mapper.CityTrainMapper.resultCityTrain2" columnPrefix="arrive_"/>
	</resultMap>
	
	<select id="listPrice" resultMap="resultPrice2">
		select * from priceTrainTime
	</select>
	
	<insert id="insertPrice" parameterType="Price">
		insert into price(price, nodeid_s, nodeid_a) value (#{price},#{nodeidS.nodeid},#{nodeidA.nodeid})
	</insert>
	
	<select id="selectPriceByPno" resultMap="resultPrice2">
		select * from priceTrainTime where p_no = #{p_no}
	</select>
	
	<select id="selectPnoBynodeId" resultType="int" parameterType="String">
		select p_no from priceTrainTime where start_nodename = #{startname} and arrive_nodename = #{arrivename}
	</select>
</mapper>